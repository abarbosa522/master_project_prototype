<!DOCTYPE html>
<html>
  <head>
    <title>Survey 1</title>

    <meta name = 'viewport' content = 'width = device-width, initial-scale = 1'>

    <!-- CSS Stylesheet -->
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/survey1.css' />

    <!-- jQuery -->
    <script type = 'text/javascript' src = '../../js/shared/jquery-3.1.0.js'></script>
    <script type = 'text/javascript' src = '../../js/shared/jquery-ui-1.12.0/jquery-ui.js'></script>

    <!-- AngularJS -->
    <script src = '../../js/shared/angular.min.js'></script>

    <!-- AngularJS Modules -->
    <script src = '../../js/app.js'></script>

    <!-- AngularJS Controllers -->
    <script src = '../../js/controllers/Survey1/SurveyController.js'></script>

    <!-- Bootstrap -->
    <link rel = 'stylesheet' href = '../../js/shared/bootstrap-3.3.7-dist/css/bootstrap.min.css' />
    <link rel = 'stylesheet' href = '../../js/shared/bootstrap-3.3.7-dist/css/bootstrap-theme.min.css' />
    <script type = 'text/javascript' src = '../../js/shared/bootstrap-3.3.7-dist/js/bootstrap.js'></script>
    <script type = 'text/javascript' src = '../../js/shared/bootstrap-3.3.7-dist/js/bootstrap.min.js'></script>
  </head>

  <body ng-app = 'decisionSpace' ng-controller = 'SurveyController'>
    <div class = 'container'>

      <h1>Survey 1 - Smart Cities</h1>

      <h2>Step 1: Select (and add) the types of attributes that you find relevant</h2>
      <div class = 'row'>
        <table class = 'table'>
          <thead>
            <tr>
              <th>Type Name</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat = 'type in types'>
              <td>
                <input type = 'checkbox' value = {{type.name}} ng-checked = {{type.checked}} ng-click = 'updateTypesList(type.name)'>
                {{type.name}}
              </td>
            </tr>
            <tr>
              <td>
                <form class = 'form-inline'>
                  <input class = 'form-control' type = 'text' ng-model = 'newType.name' placeholder = "Add a Type"/>
                  <button class = 'btn btn-success' ng-click = 'addType()'>
                    <span class = 'glyphicon glyphicon-plus'></span>
                  </button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <h2>Step 2: Select (and add) the attributes that you find relevant and their types</h2>
      <div class = 'row'>
        <table class = 'table'>
          <thead>
            <tr>
              <th>Attribute Types</th>
              <th>Attributes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <td ng-repeat = 'attribute in attributes'>
                <input type = 'checkbox' value = {{attribute.name}} ng-checked = {{attribute.checked}} ng-click = 'updateAttrList(attribute.name)'>
                {{attribute.name}}
              </td>
            </tr>
            <tr ng-repeat = 'type in types' ng-if = 'type.checked == 1'>
                <td>{{type.name}}</td>
                <td ng-repeat = 'attribute in attributes'>
                  <div ng-if = 'attribute.checked == 1'>
                    <input type = 'radio' ng-checked = 'type.name == attribute.type' ng-click = 'updateAttrTypesList(attribute.name, type.name)'>
                  </div>
                </td>
            </tr>
            <tr>
              <td ng-repeat = 'attribute in attributes'>
              </td>
              <td>
                <form class = 'form-inline'>
                  <input class = 'form-control' type = 'text' ng-model = 'newAttribute.name' placeholder = 'Add an Attribute'/>
                  <button class = 'btn btn-success' ng-click = 'addAttribute()'>
                    <span class = 'glyphicon glyphicon-plus'></span>
                  </button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>


      <h2>Step 3: Propose classes of smart-city using the attributes of Step 2</h2>
      <div class = 'row'>
        <table class = 'table'>
          <thead>
            <tr>
              <th>Class Attributes</th>
              <th>Classes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <td ng-repeat = 'class in classes'>
                {{class.name}}
              </td>
            </tr>
            <tr ng-repeat = 'attribute in attributes' ng-if = 'attribute.checked == 1'>
              <td>{{attribute.name}}</td>
              <td ng-repeat = 'class in classes'>
                <input type = 'checkbox' ng-checked = 'classAttrChecked(class.name, attribute.name)' ng-click = 'updateClassAttr(class.name, attribute.name)'>
              </td>
            </tr>
            <tr>
              <td></td>
              <td ng-repeat = 'class in classes'>
                <button class = 'btn btn-danger' ng-click = 'deleteClass(class.name)'>
                  <span class = 'glyphicon glyphicon-remove'></span>
                </button>
              </td>
            </tr>
            <tr>
              <td ng-repeat = 'class in classes'></td>
              <td>
                <form class = 'form-inline'>
                  <input class = 'form-control' type = 'text' ng-model = 'newClass.name' placeholder = "Add a Class"/>
                  <button class = 'btn btn-success' ng-click = 'addClass()'>
                    <span class = 'glyphicon glyphicon-plus'></span>
                  </button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <h2>Step 4: Indicate which two cities you studied and which classes they belong to</h2>
      <div class = 'row'>
        <table class = 'table'>
          <thead>
            <tr>
              <th>City Classes</th>
              <th>Cities</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <td ng-repeat = 'city in cities'>
                {{city.name}}
              </td>
            </tr>
            <tr ng-repeat = 'class in classes'>
              <td>{{class.name}}</td>
              <td ng-repeat = 'city in cities'>
                <input type = 'radio' ng-checked = 'cityClassChecked(city.name, class.name)' ng-click = 'updateCityClass(city.name, class.name)'>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class = 'buttonWrapper'>
        <button class = 'btn btn-success' ng-click = 'submitForm(true)' >
          <span class = 'glyphicon glyphicon-ok'></span>
          Submit
        </button>
      </div>

      <br>

      <div class = 'alert alert-success' ng-if = 'showSuccessAlert'>
        <strong>Success!</strong> Thank you for your collaboration!
      </div>

      <p><sub>If you need any help, just send a message to andre.dionisio.barbosa@ist.utl.pt</sub></p>

    </div>
  </body>
</html>
